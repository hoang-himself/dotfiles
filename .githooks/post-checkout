#!/usr/bin/env bash

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
previous_head="$1"
new_head="$2"
branch_flag="$3"

echo 'Running post-checkout hook.'

for script in "$SCRIPT_DIR/post-checkout.d"/*.sh; do
  if [ -f "$script" ] && [ -x "$script" ]; then
    "$script" "$previous_head" "$new_head" "$branch_flag"
  fi
done

echo 'Post-checkout hook completed.'
exit 0
